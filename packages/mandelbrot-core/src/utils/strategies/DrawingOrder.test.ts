import { describe, test, expect } from 'vitest';
import {
    TopBottomDrawingOrderStrategy,
    UniformDrawingOrderStrategy,
    UniformTopBottomDrawingOrderStrategy,
} from './DrawingOrder';

describe('DrawingOrder', () => {
    const arr = Array.from({ length: 400 }, (_, idx) => idx);
    const arr2 = Array.from({ length: 400 }, (_, idx) => 400 - idx);

    test('TopBottomDrawingOrderStrategy', () => {
        const strategy = new TopBottomDrawingOrderStrategy();
        expect(strategy.reorder([1, 2, 3, 4, 5])).toStrictEqual([1, 2, 3, 4, 5]);
        expect(strategy.reorder([11, 22, 33, 44, 55])).toStrictEqual([11, 22, 33, 44, 55]);
        expect(strategy.reorder([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])).toStrictEqual([
            1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
        ]);
        expect(strategy.reorder([10, 9, 8, 7, 6, 5, 4, 3, 2, 1])).toStrictEqual([
            10, 9, 8, 7, 6, 5, 4, 3, 2, 1,
        ]);
    });

    test('UniformDrawingOrderStrategy', () => {
        const strategy = new UniformDrawingOrderStrategy();
        expect(strategy.reorder(arr)).toStrictEqual([
            0, 200, 100, 300, 50, 150, 250, 350, 25, 75, 125, 175, 225, 275, 325, 375, 12, 24, 36,
            48, 60, 72, 84, 96, 108, 120, 132, 144, 156, 168, 180, 192, 204, 216, 228, 240, 252,
            264, 276, 288, 312, 324, 336, 348, 360, 372, 384, 396, 6, 18, 30, 42, 54, 66, 78, 90,
            102, 114, 126, 138, 162, 174, 186, 198, 210, 222, 234, 246, 258, 270, 282, 294, 306,
            318, 330, 342, 354, 366, 378, 390, 3, 201, 105, 303, 51, 153, 255, 351, 27, 81, 129,
            177, 231, 279, 327, 381, 15, 39, 63, 93, 117, 141, 165, 189, 213, 243, 267, 291, 315,
            339, 363, 393, 9, 21, 33, 45, 57, 69, 87, 99, 111, 123, 135, 147, 159, 171, 183, 195,
            207, 219, 237, 249, 261, 273, 285, 297, 309, 321, 333, 345, 357, 369, 387, 399, 1, 202,
            101, 301, 52, 151, 251, 352, 26, 76, 127, 176, 226, 277, 326, 376, 13, 38, 64, 88, 113,
            139, 163, 188, 214, 238, 263, 289, 313, 338, 364, 388, 7, 19, 32, 44, 58, 70, 82, 94,
            107, 119, 133, 145, 157, 169, 182, 194, 208, 220, 232, 244, 257, 269, 283, 295, 307,
            319, 332, 344, 358, 370, 382, 394, 4, 205, 104, 304, 55, 154, 254, 355, 29, 79, 130,
            179, 229, 280, 329, 379, 16, 41, 67, 91, 116, 142, 166, 191, 217, 241, 266, 292, 316,
            341, 367, 391, 10, 22, 35, 47, 61, 73, 85, 97, 110, 122, 136, 148, 160, 172, 185, 197,
            211, 223, 235, 247, 260, 272, 286, 298, 310, 322, 335, 347, 361, 373, 385, 397, 2, 203,
            103, 302, 53, 152, 253, 353, 28, 77, 128, 178, 227, 278, 328, 377, 14, 40, 65, 89, 115,
            140, 164, 190, 215, 239, 265, 290, 314, 340, 365, 389, 8, 20, 34, 46, 59, 71, 83, 95,
            109, 121, 134, 146, 158, 170, 184, 196, 209, 221, 233, 245, 259, 271, 284, 296, 308,
            320, 334, 346, 359, 371, 383, 395, 5, 206, 106, 305, 56, 155, 256, 356, 31, 80, 131,
            181, 230, 281, 331, 380, 17, 43, 68, 92, 118, 143, 167, 193, 218, 242, 268, 293, 317,
            343, 368, 392, 11, 23, 37, 49, 62, 74, 86, 98, 112, 124, 137, 149, 161, 173, 187, 199,
            212, 224, 236, 248, 262, 274, 287, 299, 311, 323, 337, 349, 362, 374, 386, 398,
        ]);
        expect(strategy.reorder(arr2)).toStrictEqual([
            400, 200, 300, 100, 350, 250, 150, 50, 375, 325, 275, 225, 175, 125, 75, 25, 388, 376,
            364, 352, 340, 328, 316, 304, 292, 280, 268, 256, 244, 232, 220, 208, 196, 184, 172,
            160, 148, 136, 124, 112, 88, 76, 64, 52, 40, 28, 16, 4, 394, 382, 370, 358, 346, 334,
            322, 310, 298, 286, 274, 262, 238, 226, 214, 202, 190, 178, 166, 154, 142, 130, 118,
            106, 94, 82, 70, 58, 46, 34, 22, 10, 397, 199, 295, 97, 349, 247, 145, 49, 373, 319,
            271, 223, 169, 121, 73, 19, 385, 361, 337, 307, 283, 259, 235, 211, 187, 157, 133, 109,
            85, 61, 37, 7, 391, 379, 367, 355, 343, 331, 313, 301, 289, 277, 265, 253, 241, 229,
            217, 205, 193, 181, 163, 151, 139, 127, 115, 103, 91, 79, 67, 55, 43, 31, 13, 1, 399,
            198, 299, 99, 348, 249, 149, 48, 374, 324, 273, 224, 174, 123, 74, 24, 387, 362, 336,
            312, 287, 261, 237, 212, 186, 162, 137, 111, 87, 62, 36, 12, 393, 381, 368, 356, 342,
            330, 318, 306, 293, 281, 267, 255, 243, 231, 218, 206, 192, 180, 168, 156, 143, 131,
            117, 105, 93, 81, 68, 56, 42, 30, 18, 6, 396, 195, 296, 96, 345, 246, 146, 45, 371, 321,
            270, 221, 171, 120, 71, 21, 384, 359, 333, 309, 284, 258, 234, 209, 183, 159, 134, 108,
            84, 59, 33, 9, 390, 378, 365, 353, 339, 327, 315, 303, 290, 278, 264, 252, 240, 228,
            215, 203, 189, 177, 165, 153, 140, 128, 114, 102, 90, 78, 65, 53, 39, 27, 15, 3, 398,
            197, 297, 98, 347, 248, 147, 47, 372, 323, 272, 222, 173, 122, 72, 23, 386, 360, 335,
            311, 285, 260, 236, 210, 185, 161, 135, 110, 86, 60, 35, 11, 392, 380, 366, 354, 341,
            329, 317, 305, 291, 279, 266, 254, 242, 230, 216, 204, 191, 179, 167, 155, 141, 129,
            116, 104, 92, 80, 66, 54, 41, 29, 17, 5, 395, 194, 294, 95, 344, 245, 144, 44, 369, 320,
            269, 219, 170, 119, 69, 20, 383, 357, 332, 308, 282, 257, 233, 207, 182, 158, 132, 107,
            83, 57, 32, 8, 389, 377, 363, 351, 338, 326, 314, 302, 288, 276, 263, 251, 239, 227,
            213, 201, 188, 176, 164, 152, 138, 126, 113, 101, 89, 77, 63, 51, 38, 26, 14, 2,
        ]);
    });

    test('UniformTopBottomDrawingOrderStrategy', () => {
        const strategy = new UniformTopBottomDrawingOrderStrategy();
        expect(strategy.reorder(arr)).toStrictEqual([
            0, 200, 100, 300, 50, 150, 250, 350, 25, 75, 125, 175, 225, 275, 325, 375, 12, 24, 36,
            48, 60, 72, 84, 96, 108, 120, 132, 144, 156, 168, 180, 192, 204, 216, 228, 240, 252,
            264, 276, 288, 312, 324, 336, 348, 360, 372, 384, 396, 6, 18, 30, 42, 54, 66, 78, 90,
            102, 114, 126, 138, 162, 174, 186, 198, 210, 222, 234, 246, 258, 270, 282, 294, 306,
            318, 330, 342, 354, 366, 378, 390, 3, 9, 15, 21, 27, 33, 39, 45, 51, 57, 63, 69, 81, 87,
            93, 99, 105, 111, 117, 123, 129, 135, 141, 147, 153, 159, 165, 171, 177, 183, 189, 195,
            201, 207, 213, 219, 231, 237, 243, 249, 255, 261, 267, 273, 279, 285, 291, 297, 303,
            309, 315, 321, 327, 333, 339, 345, 351, 357, 363, 369, 381, 387, 393, 399, 1, 2, 4, 5,
            7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 26, 28, 29, 31, 32, 34, 35, 37, 38, 40,
            41, 43, 44, 46, 47, 49, 52, 53, 55, 56, 58, 59, 61, 62, 64, 65, 67, 68, 70, 71, 73, 74,
            76, 77, 79, 80, 82, 83, 85, 86, 88, 89, 91, 92, 94, 95, 97, 98, 101, 103, 104, 106, 107,
            109, 110, 112, 113, 115, 116, 118, 119, 121, 122, 124, 127, 128, 130, 131, 133, 134,
            136, 137, 139, 140, 142, 143, 145, 146, 148, 149, 151, 152, 154, 155, 157, 158, 160,
            161, 163, 164, 166, 167, 169, 170, 172, 173, 176, 178, 179, 181, 182, 184, 185, 187,
            188, 190, 191, 193, 194, 196, 197, 199, 202, 203, 205, 206, 208, 209, 211, 212, 214,
            215, 217, 218, 220, 221, 223, 224, 226, 227, 229, 230, 232, 233, 235, 236, 238, 239,
            241, 242, 244, 245, 247, 248, 251, 253, 254, 256, 257, 259, 260, 262, 263, 265, 266,
            268, 269, 271, 272, 274, 277, 278, 280, 281, 283, 284, 286, 287, 289, 290, 292, 293,
            295, 296, 298, 299, 301, 302, 304, 305, 307, 308, 310, 311, 313, 314, 316, 317, 319,
            320, 322, 323, 326, 328, 329, 331, 332, 334, 335, 337, 338, 340, 341, 343, 344, 346,
            347, 349, 352, 353, 355, 356, 358, 359, 361, 362, 364, 365, 367, 368, 370, 371, 373,
            374, 376, 377, 379, 380, 382, 383, 385, 386, 388, 389, 391, 392, 394, 395, 397, 398,
        ]);
        expect(strategy.reorder(arr2)).toStrictEqual([
            400, 200, 300, 100, 350, 250, 150, 50, 375, 325, 275, 225, 175, 125, 75, 25, 388, 376,
            364, 352, 340, 328, 316, 304, 292, 280, 268, 256, 244, 232, 220, 208, 196, 184, 172,
            160, 148, 136, 124, 112, 88, 76, 64, 52, 40, 28, 16, 4, 394, 382, 370, 358, 346, 334,
            322, 310, 298, 286, 274, 262, 238, 226, 214, 202, 190, 178, 166, 154, 142, 130, 118,
            106, 94, 82, 70, 58, 46, 34, 22, 10, 397, 391, 385, 379, 373, 367, 361, 355, 349, 343,
            337, 331, 319, 313, 307, 301, 295, 289, 283, 277, 271, 265, 259, 253, 247, 241, 235,
            229, 223, 217, 211, 205, 199, 193, 187, 181, 169, 163, 157, 151, 145, 139, 133, 127,
            121, 115, 109, 103, 97, 91, 85, 79, 73, 67, 61, 55, 49, 43, 37, 31, 19, 13, 7, 1, 399,
            398, 396, 395, 393, 392, 390, 389, 387, 386, 384, 383, 381, 380, 378, 377, 374, 372,
            371, 369, 368, 366, 365, 363, 362, 360, 359, 357, 356, 354, 353, 351, 348, 347, 345,
            344, 342, 341, 339, 338, 336, 335, 333, 332, 330, 329, 327, 326, 324, 323, 321, 320,
            318, 317, 315, 314, 312, 311, 309, 308, 306, 305, 303, 302, 299, 297, 296, 294, 293,
            291, 290, 288, 287, 285, 284, 282, 281, 279, 278, 276, 273, 272, 270, 269, 267, 266,
            264, 263, 261, 260, 258, 257, 255, 254, 252, 251, 249, 248, 246, 245, 243, 242, 240,
            239, 237, 236, 234, 233, 231, 230, 228, 227, 224, 222, 221, 219, 218, 216, 215, 213,
            212, 210, 209, 207, 206, 204, 203, 201, 198, 197, 195, 194, 192, 191, 189, 188, 186,
            185, 183, 182, 180, 179, 177, 176, 174, 173, 171, 170, 168, 167, 165, 164, 162, 161,
            159, 158, 156, 155, 153, 152, 149, 147, 146, 144, 143, 141, 140, 138, 137, 135, 134,
            132, 131, 129, 128, 126, 123, 122, 120, 119, 117, 116, 114, 113, 111, 110, 108, 107,
            105, 104, 102, 101, 99, 98, 96, 95, 93, 92, 90, 89, 87, 86, 84, 83, 81, 80, 78, 77, 74,
            72, 71, 69, 68, 66, 65, 63, 62, 60, 59, 57, 56, 54, 53, 51, 48, 47, 45, 44, 42, 41, 39,
            38, 36, 35, 33, 32, 30, 29, 27, 26, 24, 23, 21, 20, 18, 17, 15, 14, 12, 11, 9, 8, 6, 5,
            3, 2,
        ]);
    });
});
