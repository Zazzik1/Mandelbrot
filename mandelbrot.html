<html>
<head>
<meta charset="utf-8"></meta>
<title>Mandelbrot series</title>
<script src="mandelbrot.js" type="text/javascript"></script>
</head>
<body>
<canvas id="c" width="400" height="400"  style="border:1px solid #000000;cursor:pointer;"></canvas><br>
x1: <input type="number" value="-2" id="x1"/><br>
y1: <input type="number" value="-1.5" id="y1"/><br>
width: <input type="number" value="3" id="len" min="0" /><br>
max iterations(precision): <select id="iter"><option value="5">5</option><option name="20" value="20">20</option><option value="40" selected>40</option><option value="120">120</option><option value="200">200</option><option value="500">500</option><option value="800">800</option><option value="1000">1000</option><option value="1200">1200</option><option value="1400">1400</option></select><br>
canvas size: <select id="cSize"><option value="400">200x200</option><option value="400">300x300</option><option value="400" selected>400x400</option><option value="400">500x500</option><option value="400">600x600</option><option value="400">700x700</option><option value="400">800x800</option></select><br>
<input type="button" value="Draw" onclick="draw()"/>
<input type="button" value="Reset" onclick="reset()"/>
<input type="button" value="Zoom +" onclick="zoom(true)"/>
<input type="button" value="Zoom -" onclick="zoom(false)"/> If you want to zoom, just click on desired place on canvas and sometimes increase iterations to make edges sharpen.
<script>
/*
Author: Zazzik1, zazzik1.ct8.pl
*/
let canvas = document.getElementById("c");
let m = new Mandelbrot(canvas);
m.drawOnCanvas(-2, -1.5, 1, 1.5);

let input = {
	LEN: document.getElementById("len"),
	X1: document.getElementById("x1"),
	Y1: document.getElementById("y1"),
	ITER: document.getElementById("iter"),
	CSIZE: document.getElementById("cSize"),
	get(id){return parseFloat(id.value)},
	set(id, value){id.value = value}
}
function draw() {
    let len = input.get(input.LEN);
    if (len <= 0) {
        alert("Width should be > 0");
        return
    };
    if (input.get(input.ITER) <= 0) {
        alert("iterations are <= 0, corrected to 40");
        input.set(input.ITER, 40)
    };
    let x1 = input.get(input.X1);
    let y1 = input.get(input.Y1);
    m.iterations = input.get(input.ITER);
    m.drawOnCanvas(x1, y1, x1 + len, y1 + len);
}

function reset() {
    input.set(input.LEN, 3);
    input.set(input.X1, -2);
    input.set(input.Y1, -1.5);
    draw();
}
function zoom(p) {
    if (p) {
        click(0.5, 0.5);
    } else {
        let x = input.get(input.X1);
        let y = input.get(input.Y1);
        let len = input.get(input.LEN);
        input.set(input.X1, x - (0.5 * len));
        input.set(input.Y1, y - (0.5 * len));
        input.set(input.LEN, len * 2);
        draw();
    }
    draw();
}
canvas.addEventListener("click", e => {
    click(e.offsetX / canvas.width, e.offsetY / canvas.height);
});
input.ITER.addEventListener("change", () => {
    draw();
});
input.CSIZE.addEventListener("change", () => {
    canvas.width = input.get(input.CSIZE);
	canvas.height = input.get(input.CSIZE);
	draw();
});
function click(rX, rY) { //0-1 fraction
    let x = input.get(input.X1);
    let y = input.get(input.Y1);
	input.set(input.LEN, input.get(input.LEN) / 2);
	let len = input.get(input.LEN);
    input.set(input.X1, rX * len * 2 + x - (len / 2));
    input.set(input.Y1, rY * len * 2 + y - (len / 2));
    draw();
}
</script>
</body>
</html>